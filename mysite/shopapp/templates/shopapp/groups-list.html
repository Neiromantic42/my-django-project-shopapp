{% extends 'shopapp/base.html' %} {# Наследуемся от базового шаблона, чтобы использовать общий каркас HTML #}

{% block title %} {# Блок для заголовка страницы, вставляется в <title> базового шаблона #}
    Group List
{% endblock %}

{% block body %} {# Блок для основного контента страницы, вставляется в тело <body> базового шаблона #}
    <h1>Groups:</h1> {# Заголовок страницы #}
    <div>
        <form method="post">
            {% csrf_token %}
            {{ form.as_p }}
            <button type="submit">Create</button>
        </form>
    </div>
    <div> {# Контейнер для списка групп #}
        {% if not groups %} {# Проверяем, есть ли объекты в переданном context['groups'] #}
            <h3>No groups yet</h3> {# Если групп нет, выводим сообщение #}
        {% else %} {# Если группы есть #}
            <ul> {# Начало списка групп #}
                {% for group in groups %} {# Цикл по всем объектам Group из QuerySet #}
                    <li> {# Один элемент списка — одна группа #}
                        <div>{{ group.name }}</div> {# Выводим название группы #}
                        <ul> {# Вложенный список для прав доступа группы #}
                            {% for permission in group.permissions.all %} {# Цикл по всем permissions группы #}
                                <li>
                                    {{ permission.name }} {# Выводим название права доступа #}
                                    (<code>{{ permission.codename }}</code>) {# Выводим кодовое имя права доступа #}
                                </li>
                            {% endfor %} {# Конец цикла по permissions #}
                        </ul> {# Конец вложенного списка прав доступа #}
                    </li> {# Конец элемента списка группы #}
                {% endfor %} {# Конец цикла по группам #}
            </ul> {# Конец списка групп #}
        {% endif %} {# Конец проверки наличия групп #}
    </div> {# Конец контейнера #}
{% endblock %} {# Конец блока body #}
